# WFO Analyzer ‚Äî –ü–æ–ª–Ω–æ–µ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –¥–ª—è –ß–∞–π–Ω–∏–∫–æ–≤

**–ê–≤—Ç–æ—Ä:** Claude Code
**–î–∞—Ç–∞:** 2025-10-11
**–î–ª—è –∫–æ–≥–æ:** –¢—Ä–µ–π–¥–µ—Ä –∫–æ—Ç–æ—Ä—ã–π —Ö–æ—á–µ—Ç –∏–∑–±–µ–∂–∞—Ç—å overfitting –∏ –ø–æ—Å—Ç—Ä–æ–∏—Ç—å —Ä–æ–±–∞—Å—Ç–Ω—É—é —Å—Ç—Ä–∞—Ç–µ–≥–∏—é

---

## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–ß–¢–û –≠–¢–û –¢–ê–ö–û–ï –ø—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏](#—á—Ç–æ-—ç—Ç–æ)
2. [–ó–ê–ß–ï–ú —ç—Ç–æ –Ω—É–∂–Ω–æ](#–∑–∞—á–µ–º)
3. [–ö–ê–ö –≠–¢–û –†–ê–ë–û–¢–ê–ï–¢ –ø–æ—à–∞–≥–æ–≤–æ](#–∫–∞–∫-—Ä–∞–±–æ—Ç–∞–µ—Ç)
4. [–ß–¢–û –ó–ê –û–ö–ù–ê –∏ –∫–∞–∫ –æ–Ω–∏ —Ä–∞–±–æ—Ç–∞—é—Ç](#–æ–∫–Ω–∞)
5. [–ß–¢–û –ó–ê –ú–ï–¢–†–ò–ö–ò –∏ –∫–∞–∫ –∏—Ö —á–∏—Ç–∞—Ç—å](#–º–µ—Ç—Ä–∏–∫–∏)
6. [–ö–ê–ö–ò–ï –î–ê–ù–ù–´–ï –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å](#–¥–∞–Ω–Ω—ã–µ)
7. [–ö–û–ì–î–ê –∑–∞–ø—É—Å–∫–∞—Ç—å WFO](#–∫–æ–≥–¥–∞)
8. [–ö–ê–ö –ó–ê–ü–£–°–¢–ò–¢–¨ –ø–æ—à–∞–≥–æ–≤–æ](#–∑–∞–ø—É—Å–∫)
9. [–ß–¢–û –ü–û–õ–£–ß–ò–®–¨ –Ω–∞ –≤—ã—Ö–æ–¥–µ](#—Ä–µ–∑—É–ª—å—Ç–∞—Ç)
10. [–ü–†–ò–ú–ï–†–´ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è](#–ø—Ä–∏–º–µ—Ä—ã)
11. [FAQ - –ß–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã](#faq)

---

<a name="—á—Ç–æ-—ç—Ç–æ"></a>
## 1. –ß–¢–û –≠–¢–û –¢–ê–ö–û–ï –ø—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏

### –ü—Ä–æ–±–ª–µ–º–∞ –∫–æ—Ç–æ—Ä—É—é —Ä–µ—à–∞–µ—Ç WFO

**–¢–≤–æ—è —Ç–µ–∫—É—â–∞—è —Å–∏—Ç—É–∞—Ü–∏—è:**
```
–£ —Ç–µ–±—è –µ—Å—Ç—å –¥–∞–Ω–Ω—ã–µ 2020-2024 (5 –ª–µ—Ç)

–¢—ã –∑–∞–ø—É—Å–∫–∞–µ—à—å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é:
  - Optuna –ø–µ—Ä–µ–±–∏—Ä–∞–µ—Ç 1000 –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
  - –ù–∞—Ö–æ–¥–∏—Ç "–ª—É—á—à–∏–µ" –ø–∞—Ä–∞–º–µ—Ç—Ä—ã: stop_loss=2.5, take_profit=5.0
  - Backtest –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç: Sharpe=3.5, PnL=+500$

–¢—ã –¥—É–º–∞–µ—à—å: "–°—É–ø–µ—Ä! –ó–∞–ø—É—â—É –≤ live!"

–ó–∞–ø—É—Å–∫–∞–µ—à—å live trading –≤ 2025:
  - Sharpe –ø–∞–¥–∞–µ—Ç –¥–æ 0.2
  - PnL = -50$
  - –ß—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫???
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–∞—Ä–∞–º–µ—Ç—Ä—ã "–∑–∞—Ç–æ—á–µ–Ω—ã" –ø–æ–¥ –¥–∞–Ω–Ω—ã–µ 2020-2024. –û–Ω–∏ –ù–ï —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–∞ –Ω–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö 2025!

**–†–µ—à–µ–Ω–∏–µ:** WFO (Walk-Forward Optimization) ‚Äî –∏–º–∏—Ç–∏—Ä—É–µ—Ç —Ä–µ–∞–ª—å–Ω—É—é —Ç–æ—Ä–≥–æ–≤–ª—é –Ω–∞ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö.

---

### –ß—Ç–æ –¥–µ–ª–∞–µ—Ç WFO –ø—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏

**WFO = –∏–º–∏—Ç–∞—Ü–∏—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ —Ç—Ä–µ–π–¥–∏–Ω–≥–∞**

–í —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏ —Ç—ã –¥–µ–ª–∞–µ—à—å —Ç–∞–∫:
1. –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—à—å –ø—Ä–æ—à–ª–æ–µ (backtest –Ω–∞ 2020-2022)
2. –ù–∞—Ö–æ–¥–∏—à—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
3. –¢–æ—Ä–≥—É–µ—à—å live (2023)
4. –ß–µ—Ä–µ–∑ –ø–æ–ª–≥–æ–¥–∞ ‚Äî –ø–µ—Ä–µ–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –Ω–∞ –Ω–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
5. Repeat

**WFO –¥–µ–ª–∞–µ—Ç –¢–û –ñ–ï, –Ω–æ –Ω–∞ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö:**

```
–¢–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ 2020-2024:

WFO Window 1:
  [Train: 2020-2022] ‚Üí –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è ‚Üí params_1
  [Test: 2023-—è–Ω–≤]   ‚Üí —Ç–æ—Ä–≥–æ–≤–ª—è —Å params_1 ‚Üí —Ä–µ–∑—É–ª—å—Ç–∞—Ç_1

WFO Window 2:
  [Train: 2020-2023-–∏—é–Ω—å] ‚Üí –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è ‚Üí params_2
  [Test: 2023-–∏—é–ª—å]       ‚Üí —Ç–æ—Ä–≥–æ–≤–ª—è —Å params_2 ‚Üí —Ä–µ–∑—É–ª—å—Ç–∞—Ç_2

WFO Window 3:
  [Train: 2020-2023-–¥–µ–∫–∞–±—Ä—å] ‚Üí –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è ‚Üí params_3
  [Test: 2024-—è–Ω–≤–∞—Ä—å]        ‚Üí —Ç–æ—Ä–≥–æ–≤–ª—è —Å params_3 ‚Üí —Ä–µ–∑—É–ª—å—Ç–∞—Ç_3

...–∏ —Ç–∞–∫ –¥–∞–ª–µ–µ
```

**–ò—Ç–æ–≥:** –¢—ã –ø–æ–ª—É—á–∞–µ—à—å –†–ï–ê–õ–ò–°–¢–ò–ß–ù–£–Æ –æ—Ü–µ–Ω–∫—É —Ç–æ–≥–æ, –∫–∞–∫ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–∞ –ù–û–í–´–• –¥–∞–Ω–Ω—ã—Ö (–∫–æ—Ç–æ—Ä—ã–µ –Ω–µ —É—á–∞—Å—Ç–≤–æ–≤–∞–ª–∏ –≤ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏).

---

<a name="–∑–∞—á–µ–º"></a>
## 2. –ó–ê–ß–ï–ú —ç—Ç–æ –Ω—É–∂–Ω–æ

### –î–æ WFO (—Ç–≤–æ–π —Ç–µ–∫—É—â–∏–π –ø–æ–¥—Ö–æ–¥):
```
–î–∞–Ω–Ω—ã–µ [=====================================]
         2020                            2024

–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –Ω–∞ –í–°–ï–• –¥–∞–Ω–Ω—ã—Ö ‚Üí params

Backtest Sharpe: 3.5 ‚Üê –≠—Ç–æ –§–ï–ô–ö! –ü–∞—Ä–∞–º–µ—Ç—Ä—ã "–ø–æ–¥–æ–≥–Ω–∞–Ω—ã"
Live Sharpe:     0.2 ‚Üê –†–µ–∞–ª—å–Ω–æ—Å—Ç—å
```

### –ü–æ—Å–ª–µ WFO:
```
–î–∞–Ω–Ω—ã–µ [=====================================]
         2020                            2024

–û–∫–Ω–æ 1: [Train====][Test]
–û–∫–Ω–æ 2:    [Train======][Test]
–û–∫–Ω–æ 3:       [Train========][Test]

OOS Sharpe: 1.5 ‚Üê –†–µ–∞–ª–∏—Å—Ç–∏—á–Ω–∞—è –æ—Ü–µ–Ω–∫–∞
Live Sharpe: 1.2 ‚Üê –ë–ª–∏–∑–∫–æ –∫ OOS! ‚úÖ
```

### –ó–∞—á–µ–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ:

1. **–ò–∑–±–µ–∂–∞—Ç—å overfitting** ‚Äî –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –Ω–µ "–ø–æ–¥–æ–≥–Ω–∞–Ω—ã" –ø–æ–¥ –ø—Ä–æ—à–ª–æ–µ
2. **–†–µ–∞–ª–∏—Å—Ç–∏—á–Ω–∞—è –æ—Ü–µ–Ω–∫–∞** ‚Äî –∑–Ω–∞–µ—à—å –∫–∞–∫ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –ø–æ–≤–µ–¥—ë—Ç —Å–µ–±—è –≤ live
3. **–†–æ–±–∞—Å—Ç–Ω–æ—Å—Ç—å** ‚Äî –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–∞ –†–ê–ó–ù–´–• –ø–µ—Ä–∏–æ–¥–∞—Ö
4. **–£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å** ‚Äî –µ—Å–ª–∏ WFO –ø–æ–∫–∞–∑–∞–ª —Ö–æ—Ä–æ—à–æ, –≤ live —Ç–æ–∂–µ –±—É–¥–µ—Ç —Ö–æ—Ä–æ—à–æ

---

<a name="–∫–∞–∫-—Ä–∞–±–æ—Ç–∞–µ—Ç"></a>
## 3. –ö–ê–ö –≠–¢–û –†–ê–ë–û–¢–ê–ï–¢ –ø–æ—à–∞–≥–æ–≤–æ

### –ü–æ—à–∞–≥–æ–≤—ã–π –ø—Ä–æ—Ü–µ—Å—Å WFO

**Input:** –û–¥–∏–Ω –¥–∞—Ç–∞—Å–µ—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, BTCUSDT 2020-2024, 1M –±–∞—Ä–æ–≤)

**–®–∞–≥ 1: –†–µ–∑–µ—Ä–≤–∞—Ü–∏—è Hold-out**
```
–í–µ—Å—å –¥–∞—Ç–∞—Å–µ—Ç: [========================================] 1M –±–∞—Ä–æ–≤

Hold-out (10%): [====] ‚Üê –ù–ï –¢–†–û–ì–ê–ï–ú –¥–æ —Å–∞–º–æ–≥–æ –∫–æ–Ω—Ü–∞!
–î–∞–Ω–Ω—ã–µ –¥–ª—è WFO: [==================================] 900K –±–∞—Ä–æ–≤
```

Hold-out = –ø–æ—Å–ª–µ–¥–Ω–∏–µ 10% –¥–∞–Ω–Ω—ã—Ö. –≠—Ç–æ "unseen data" –¥–ª—è —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞.

---

**–®–∞–≥ 2: –°–æ–∑–¥–∞–Ω–∏–µ WFO –æ–∫–æ–Ω**

WFO analyzer —Ä–∞–∑–±–∏–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –Ω–∞ –æ–∫–Ω–∞ (windows).

**Anchored WFO** (train —Ä–∞—Å—Ç—ë—Ç):
```
900K –±–∞—Ä–æ–≤ –¥–ª—è WFO:

Window 1:
  Train [======]          (40% = 360K bars)
  Test       [==]         (10% = 90K bars)

Window 2:
  Train [==========]      (50% = 450K bars)
  Test           [==]     (10% = 90K bars)

Window 3:
  Train [==============]  (60% = 540K bars)
  Test               [==] (10% = 90K bars)

...
```

**Rolling WFO** (–æ–∫–Ω–∞ —Å–∫–æ–ª—å–∑—è—Ç):
```
Window 1:
  Train [======]          (—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–∞–∑–º–µ—Ä)
  Test       [==]

Window 2:
      Train [======]      (—Ç–æ—Ç –∂–µ —Ä–∞–∑–º–µ—Ä, –Ω–æ —Å–¥–≤–∏–Ω—É—Ç)
      Test       [==]

Window 3:
          Train [======]
          Test       [==]
```

---

**–®–∞–≥ 3: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –Ω–∞ –∫–∞–∂–¥–æ–º –æ–∫–Ω–µ**

–î–ª—è –ö–ê–ñ–î–û–ì–û –æ–∫–Ω–∞ WFO analyzer –¥–µ–ª–∞–µ—Ç:

```python
# –û–∫–Ω–æ 1
train_data = data[0:360K]      # Train –ø–µ—Ä–∏–æ–¥
test_data = data[360K:450K]    # Test –ø–µ—Ä–∏–æ–¥

# 3.1 –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –Ω–∞ Train (In-Sample)
optimizer = FastStrategyOptimizer(...)
optimizer.optimize(
    data=train_data,
    n_trials=500
)
best_params_1 = optimizer.best_params  # –ù–∞–ø—Ä–∏–º–µ—Ä: {stop_loss: 2.5, take_profit: 5.0}
IS_sharpe_1 = optimizer.best_value     # –ù–∞–ø—Ä–∏–º–µ—Ä: 2.8

# 3.2 –¢–µ—Å—Ç –Ω–∞ Test (Out-of-Sample)
strategy = Strategy(**best_params_1)
results = strategy.backtest(test_data)  # –î–ê–ù–ù–´–ï –ö–û–¢–û–†–´–ï –ù–ï –í–ò–î–ï–õ–ê –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–Ø!
OOS_sharpe_1 = results['sharpe_ratio']  # –ù–∞–ø—Ä–∏–º–µ—Ä: 1.5
OOS_pnl_1 = results['net_pnl']          # –ù–∞–ø—Ä–∏–º–µ—Ä: +120$

# 3.3 –°—Ä–∞–≤–Ω–µ–Ω–∏–µ
window_1_efficiency = OOS_sharpe_1 / IS_sharpe_1  # 1.5 / 2.8 = 0.536 (53.6%)
```

**Repeat –¥–ª—è –≤—Å–µ—Ö –æ–∫–æ–Ω (2, 3, 4, ...).**

---

**–®–∞–≥ 4: –ê–≥—Ä–µ–≥–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤**

–ü–æ—Å–ª–µ –≤—Å–µ—Ö –æ–∫–æ–Ω —Å–æ–±–∏—Ä–∞–µ–º –º–µ—Ç—Ä–∏–∫–∏:

```python
windows = [
    Window(IS_sharpe=2.8, OOS_sharpe=1.5, OOS_pnl=+120),
    Window(IS_sharpe=3.0, OOS_sharpe=1.8, OOS_pnl=+150),
    Window(IS_sharpe=2.5, OOS_sharpe=1.3, OOS_pnl=+90),
    Window(IS_sharpe=2.9, OOS_sharpe=1.6, OOS_pnl=+110),
]

# WFO Efficiency
mean_IS = (2.8 + 3.0 + 2.5 + 2.9) / 4 = 2.8
mean_OOS = (1.5 + 1.8 + 1.3 + 1.6) / 4 = 1.55
WFO_Efficiency = 1.55 / 2.8 = 0.554 (55.4%) ‚úÖ

# Consistency
positive_windows = 4 out of 4
Consistency = 100% ‚úÖ

# Stability
std(OOS) = 0.19
Stability = 0.19 / 1.55 = 0.12 ‚úÖ (–Ω–∏–∑–∫–∞—è = —Ö–æ—Ä–æ—à–æ)
```

---

**–®–∞–≥ 5: Ensemble –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤**

–ò–∑ –≤—Å–µ—Ö –æ–∫–æ–Ω –ø–æ–ª—É—á–∞–µ–º –Ω–∞–±–æ—Ä—ã –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤:
```python
Window 1: {stop_loss: 2.5, take_profit: 5.0}
Window 2: {stop_loss: 2.8, take_profit: 4.8}
Window 3: {stop_loss: 2.3, take_profit: 5.2}
Window 4: {stop_loss: 2.6, take_profit: 4.9}

# –§–∏–Ω–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã = median
final_params = {
    stop_loss: median(2.5, 2.8, 2.3, 2.6) = 2.55,
    take_profit: median(5.0, 4.8, 5.2, 4.9) = 4.95
}
```

---

**–®–∞–≥ 6: Hold-out —Ç–µ—Å—Ç**

–§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ "unseen data":

```python
holdout_data = data[900K:1M]  # –ü–æ—Å–ª–µ–¥–Ω–∏–µ 10%

strategy = Strategy(**final_params)
holdout_results = strategy.backtest(holdout_data)

holdout_sharpe = 1.4
holdout_pnl = +95$

# –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å In-Sample
holdout_vs_IS = 1.4 / 2.8 = 50%

# –ï—Å–ª–∏ > 50% ‚Üí –æ—Ç–ª–∏—á–Ω–æ!
# –ï—Å–ª–∏ > 30% ‚Üí –ø—Ä–∏–µ–º–ª–µ–º–æ
# –ï—Å–ª–∏ < 30% ‚Üí overfit
```

---

<a name="–æ–∫–Ω–∞"></a>
## 4. –ß–¢–û –ó–ê –û–ö–ù–ê –∏ –∫–∞–∫ –æ–Ω–∏ —Ä–∞–±–æ—Ç–∞—é—Ç

### –û–∫–Ω–æ (Window) = –æ–¥–Ω–∞ –∏—Ç–µ—Ä–∞—Ü–∏—è WFO

```
Window —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –¥–≤—É—Ö —á–∞—Å—Ç–µ–π:

[Train Period] ‚Üí –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è ‚Üí –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
[Test Period]  ‚Üí —Ç–æ—Ä–≥–æ–≤–ª—è —Å –Ω–∞–π–¥–µ–Ω–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ ‚Üí —Ä–µ–∑—É–ª—å—Ç–∞—Ç
```

### –¢–∏–ø—ã –æ–∫–æ–Ω

#### Anchored Windows (—Ä–∞—Å—Ç—É—â–µ–µ train –æ–∫–Ω–æ)

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- –î–∞–Ω–Ω—ã—Ö –º–∞–ª–æ –≤ –Ω–∞—á–∞–ª–µ –ø–µ—Ä–∏–æ–¥–∞
- –•–æ—á–µ—à—å —É—á–∏—Ç—ã–≤–∞—Ç—å –≤–µ—Å—å –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–π –æ–ø—ã—Ç
- –†—ã–Ω–æ–∫ —ç–≤–æ–ª—é—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç –º–µ–¥–ª–µ–Ω–Ω–æ

**–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è:**
```
–î–∞–Ω–Ω—ã–µ: [=============================================]
        2020-01       2022-01       2024-01      2025-01

Window 1:
  Train [=====]
  Test       [=]

Window 2:
  Train [=========]
  Test           [=]

Window 3:
  Train [=============]
  Test               [=]

Window 4:
  Train [=================]
  Test                   [=]
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- Train –æ–∫–Ω–æ **–†–ê–°–¢–Å–¢** —Å –∫–∞–∂–¥—ã–º –æ–∫–Ω–æ–º
- Test –æ–∫–Ω–æ **–§–ò–ö–°–ò–†–û–í–ê–ù–ù–û–ì–û —Ä–∞–∑–º–µ—Ä–∞**
- Anchor point = –Ω–∞—á–∞–ª–æ –¥–∞–Ω–Ω—ã—Ö (2020-01)

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
```python
config = WFOConfig(
    wfo_type='anchored',
    min_train_size=0.4,  # –ú–∏–Ω–∏–º—É–º 40% –Ω–∞ train
    test_size=0.1,       # –¢–µ—Å—Ç –≤—Å–µ–≥–¥–∞ 10%
    step_size=0.1        # –®–∞–≥ 10%
)

# –°–æ–∑–¥–∞—Å—Ç –æ–∫–Ω–∞:
# Window 1: Train 40%, Test 10%
# Window 2: Train 50%, Test 10%
# Window 3: Train 60%, Test 10%
# Window 4: Train 70%, Test 10%
# Window 5: Train 80%, Test 10%
```

---

#### Rolling Windows (—Å–∫–æ–ª—å–∑—è—â–µ–µ –æ–∫–Ω–æ)

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- –•–æ—á–µ—à—å –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è –∫ –¢–ï–ö–£–©–ò–ú —É—Å–ª–æ–≤–∏—è–º —Ä—ã–Ω–∫–∞
- –°—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ —Ç–µ—Ä—è—é—Ç —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å (crypto, high-freq)
- –ë—ã—Å—Ç—Ä–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è –≤–∞–∂–Ω–µ–µ –¥–æ–ª–≥–æ–π –∏—Å—Ç–æ—Ä–∏–∏

**–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è:**
```
–î–∞–Ω–Ω—ã–µ: [=============================================]

Window 1:
  Train [=====]
  Test       [=]

Window 2:
      Train [=====]
      Test       [=]

Window 3:
          Train [=====]
          Test       [=]

Window 4:
              Train [=====]
              Test       [=]
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- Train –∏ Test **–§–ò–ö–°–ò–†–û–í–ê–ù–ù–û–ì–û —Ä–∞–∑–º–µ—Ä–∞**
- –û–∫–Ω–∞ **–°–ö–û–õ–¨–ó–Ø–¢** –≤–ø–µ—Ä—ë–¥
- –°—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ "–∑–∞–±—ã–≤–∞—é—Ç—Å—è"

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
```python
config = WFOConfig(
    wfo_type='rolling',
    train_size=0.5,   # Train –≤—Å–µ–≥–¥–∞ 50%
    test_size=0.1,    # Test –≤—Å–µ–≥–¥–∞ 10%
    step_size=0.1     # –®–∞–≥ 10%
)

# –°–æ–∑–¥–∞—Å—Ç –æ–∫–Ω–∞:
# Window 1: Train [0:50%], Test [50:60%]
# Window 2: Train [10:60%], Test [60:70%]
# Window 3: Train [20:70%], Test [70:80%]
# Window 4: Train [30:80%], Test [80:90%]
```

---

### Gap (Embargo Period)

**–ß—Ç–æ —ç—Ç–æ:** –ü–∞—É–∑–∞ –º–µ–∂–¥—É Train –∏ Test –ø–µ—Ä–∏–æ–¥–∞–º–∏.

```
Train [======]  GAP [..] Test [==]
```

**–ó–∞—á–µ–º:**
- –ò–∑–±–µ–∂–∞—Ç—å information leakage (–µ—Å–ª–∏ –µ—Å—Ç—å –ª–∞–≥–∏ –≤ –¥–∞–Ω–Ω—ã—Ö)
- –†–µ–∞–ª–∏—Å—Ç–∏—á–Ω–µ–µ –∏–º–∏—Ç–∏—Ä–æ–≤–∞—Ç—å live deployment
- –£—á–µ—Å—Ç—å –≤—Ä–µ–º—è –Ω–∞ –ø–µ—Ä–µ–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é

**–ü—Ä–∏–º–µ—Ä:**
```python
config = WFOConfig(
    gap_size=0.05  # 5% –¥–∞–Ω–Ω—ã—Ö
)

# Train: [0:500K bars]
# GAP:   [500K:525K bars] ‚Üê –ù–ï –ò–°–ü–û–õ–¨–ó–£–Æ–¢–°–Ø
# Test:  [525K:625K bars]
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- –î–ª—è crypto: gap = 1-3 –¥–Ω—è (0.01-0.03 –µ—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –∑–∞ –≥–æ–¥)
- –î–ª—è stocks: gap = 1-5 –¥–Ω–µ–π
- –ï—Å–ª–∏ –Ω–µ—Ç –ª–∞–≥–æ–≤ –≤ –¥–∞–Ω–Ω—ã—Ö: gap = 0

---

<a name="–º–µ—Ç—Ä–∏–∫–∏"></a>
## 5. –ß–¢–û –ó–ê –ú–ï–¢–†–ò–ö–ò –∏ –∫–∞–∫ –∏—Ö —á–∏—Ç–∞—Ç—å

### –ú–µ—Ç—Ä–∏–∫–∞ #1: WFO Efficiency

**–§–æ—Ä–º—É–ª–∞:**
```
WFO_Efficiency = mean(OOS_Sharpe_1..N) / mean(IS_Sharpe_1..N)
```

–ì–¥–µ:
- `N` = –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ WFO –æ–∫–æ–Ω
- `OOS_Sharpe` = Sharpe –Ω–∞ Test –ø–µ—Ä–∏–æ–¥–µ (Out-of-Sample)
- `IS_Sharpe` = Sharpe –Ω–∞ Train –ø–µ—Ä–∏–æ–¥–µ (In-Sample)

**–ü—Ä–∏–º–µ—Ä —Ä–∞—Å—á—ë—Ç–∞:**
```python
Windows:
  Window 1: IS=2.8, OOS=1.5
  Window 2: IS=3.0, OOS=1.8
  Window 3: IS=2.5, OOS=1.3
  Window 4: IS=2.9, OOS=1.6

mean_IS = (2.8 + 3.0 + 2.5 + 2.9) / 4 = 2.8
mean_OOS = (1.5 + 1.8 + 1.3 + 1.6) / 4 = 1.55

WFO_Efficiency = 1.55 / 2.8 = 0.554 (55.4%)
```

**–ö–∞–∫ —á–∏—Ç–∞—Ç—å:**

| WFO Efficiency | –û—Ü–µ–Ω–∫–∞ | –ß—Ç–æ –¥–µ–ª–∞—Ç—å |
|----------------|--------|------------|
| > 0.7 | üü¢ –û—Ç–ª–∏—á–Ω–æ | –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –æ—á–µ–Ω—å —Ä–æ–±–∞—Å—Ç–Ω—ã, –º–æ–∂–Ω–æ –≤ live |
| 0.5 - 0.7 | üü¢ –•–æ—Ä–æ—à–æ | –ü—Ä–∏–µ–º–ª–µ–º—ã–π —É—Ä–æ–≤–µ–Ω—å, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å |
| 0.3 - 0.5 | üü° –ü–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ | –ï—Å—Ç—å degradation, –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ |
| < 0.3 | üî¥ –ü–ª–æ—Ö–æ | –°–∏–ª—å–Ω—ã–π overfit, –ø–µ—Ä–µ–¥–µ–ª–∞—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥–∏—é |

**–ß—Ç–æ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç –ø—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏:**

- **0.55** = Out-of-sample Sharpe —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç 55% –æ—Ç In-sample Sharpe
- **Degradation** = 45% (100% - 55%)
- **–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è:** –û–∂–∏–¥–∞–π —á—Ç–æ –≤ live —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –±—É–¥—É—Ç ~50-60% –æ—Ç backtest

**–ò–¥–µ–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ:**
- 1.0 = –Ω–µ—Ç degradation (–Ω–µ—Ä–µ–∞–ª—å–Ω–æ)
- 0.7-0.8 = –æ—á–µ–Ω—å —Ö–æ—Ä–æ—à–æ
- 0.5-0.6 = –Ω–æ—Ä–º–∞ –¥–ª—è —Ö–æ—Ä–æ—à–∏—Ö —Å—Ç—Ä–∞—Ç–µ–≥–∏–π
- < 0.5 = –µ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º—ã

---

### –ú–µ—Ç—Ä–∏–∫–∞ #2: Consistency Score

**–§–æ—Ä–º—É–ª–∞:**
```
Consistency = count(positive_OOS_windows) / total_windows
```

**–ü—Ä–∏–º–µ—Ä:**
```python
Windows:
  Window 1: OOS_Sharpe = 1.5 (positive ‚úì)
  Window 2: OOS_Sharpe = 1.8 (positive ‚úì)
  Window 3: OOS_Sharpe = -0.2 (negative ‚úó)
  Window 4: OOS_Sharpe = 1.6 (positive ‚úì)

positive_count = 3
total = 4

Consistency = 3 / 4 = 0.75 (75%)
```

**–ö–∞–∫ —á–∏—Ç–∞—Ç—å:**

| Consistency | –û—Ü–µ–Ω–∫–∞ | –ß—Ç–æ –¥–µ–ª–∞—Ç—å |
|-------------|--------|------------|
| = 100% | üü¢ –ò–¥–µ–∞–ª—å–Ω–æ | –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –í–°–ï–• –ø–µ—Ä–∏–æ–¥–∞—Ö |
| > 80% | üü¢ –û—Ç–ª–∏—á–Ω–æ | –í—ã—Å–æ–∫–∞—è —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ—Å—Ç—å |
| 60-80% | üü° –•–æ—Ä–æ—à–æ | –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ –ø–µ—Ä–∏–æ–¥–æ–≤ |
| < 60% | üî¥ –ü–ª–æ—Ö–æ | –ù–µ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è |

**–ß—Ç–æ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç:**

- **75%** = —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –ø—Ä–∏–±—ã–ª—å–Ω–∞ –Ω–∞ 3 –∏–∑ 4 –ø–µ—Ä–∏–æ–¥–æ–≤
- **25%** –ø–µ—Ä–∏–æ–¥–æ–≤ –±—ã–ª–∏ —É–±—ã—Ç–æ—á–Ω—ã
- **–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è:** –í live –±—É–¥—É—Ç –ø–µ—Ä–∏–æ–¥—ã –ø—Ä–æ—Å–∞–¥–∫–∏, –Ω–æ –≤ —Ü–µ–ª–æ–º –ø–ª—é—Å

**–ò–¥–µ–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ:**
- 100% = —Ä–∞–±–æ—Ç–∞–µ—Ç –≤—Å–µ–≥–¥–∞ (–æ—á–µ–Ω—å —Ä–µ–¥–∫–æ)
- 80-90% = –æ—á–µ–Ω—å —Ö–æ—Ä–æ—à–æ
- 60-70% = –Ω–æ—Ä–º–∞

---

### –ú–µ—Ç—Ä–∏–∫–∞ #3: Stability (Coefficient of Variation)

**–§–æ—Ä–º—É–ª–∞:**
```
Stability = std(OOS_Sharpe_1..N) / mean(OOS_Sharpe_1..N)
```

**–ü—Ä–∏–º–µ—Ä:**
```python
OOS_Sharpes = [1.5, 1.8, 1.3, 1.6]

mean = 1.55
std = 0.19

Stability = 0.19 / 1.55 = 0.12 (12%)
```

**–ö–∞–∫ —á–∏—Ç–∞—Ç—å:**

| Stability (CV) | –û—Ü–µ–Ω–∫–∞ | –ß—Ç–æ –¥–µ–ª–∞—Ç—å |
|----------------|--------|------------|
| < 0.3 | üü¢ –û—Ç–ª–∏—á–Ω–æ | –°—Ç–∞–±–∏–ª—å–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã |
| 0.3 - 0.5 | üü° –•–æ—Ä–æ—à–æ | –£–º–µ—Ä–µ–Ω–Ω–∞—è –≤–∞—Ä–∏–∞—Ç–∏–≤–Ω–æ—Å—Ç—å |
| 0.5 - 1.0 | üü° –ü–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ | –í—ã—Å–æ–∫–∞—è –≤–∞—Ä–∏–∞—Ç–∏–≤–Ω–æ—Å—Ç—å |
| > 1.0 | üî¥ –ü–ª–æ—Ö–æ | –ù–µ—Å—Ç–∞–±–∏–ª—å–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è |

**–ß—Ç–æ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç:**

- **0.12** = —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ 12% –æ—Ç —Å—Ä–µ–¥–Ω–µ–≥–æ
- **–†–∞–∑–±—Ä–æ—Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤:** 1.55 ¬± 0.19 = –æ—Ç 1.36 –¥–æ 1.74
- **–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è:** –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã, –Ω–∏–∑–∫–∞—è –≤–∞—Ä–∏–∞—Ç–∏–≤–Ω–æ—Å—Ç—å

**–ò–¥–µ–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ:**
- 0 = –≤—Å–µ–≥–¥–∞ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã (–Ω–µ—Ä–µ–∞–ª—å–Ω–æ)
- < 0.2 = –æ—á–µ–Ω—å —Å—Ç–∞–±–∏–ª—å–Ω–æ
- 0.3-0.5 = –Ω–æ—Ä–º–∞

---

### –ú–µ—Ç—Ä–∏–∫–∞ #4: Degradation Ratio

**–§–æ—Ä–º—É–ª–∞:**
```
Degradation = 1 - (mean_OOS / mean_IS)
```

**–ü—Ä–∏–º–µ—Ä:**
```python
mean_IS = 2.8
mean_OOS = 1.55

Degradation = 1 - (1.55 / 2.8) = 1 - 0.554 = 0.446 (44.6%)
```

**–ö–∞–∫ —á–∏—Ç–∞—Ç—å:**

| Degradation | –û—Ü–µ–Ω–∫–∞ | –ß—Ç–æ –¥–µ–ª–∞—Ç—å |
|-------------|--------|------------|
| < 20% | üü¢ –û—Ç–ª–∏—á–Ω–æ | –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –ø–æ—Ç–µ—Ä—è performance |
| 20-40% | üü¢ –•–æ—Ä–æ—à–æ | –ü—Ä–∏–µ–º–ª–µ–º—ã–π —É—Ä–æ–≤–µ–Ω—å |
| 40-60% | üü° –ü–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ | –ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω–∞—è degradation |
| > 60% | üî¥ –ü–ª–æ—Ö–æ | –°–∏–ª—å–Ω—ã–π overfit |

**–ß—Ç–æ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç:**

- **44.6%** = —Ç–µ—Ä—è–µ—à—å 44.6% performance –æ—Ç backtest –∫ OOS
- **–û–∂–∏–¥–∞–π:** –ï—Å–ª–∏ backtest Sharpe=2.8, –≤ live –±—É–¥–µ—Ç ~1.5
- **–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è:** –ù–æ—Ä–º–∞ –¥–ª—è –∞–ª–≥–æ—Ç—Ä–µ–π–¥–∏–Ω–≥–∞

**–°–≤—è–∑—å —Å WFO Efficiency:**
```
Degradation ‚âà 1 - WFO_Efficiency
```

---

### –°–≤–æ–¥–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–∏

**–ü—Ä–∏–º–µ—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ WFO:**
```
WFO Efficiency:  0.554 (55.4%)
Consistency:     75%
Stability:       0.12
Degradation:     44.6%
```

**–í–µ—Ä–¥–∏–∫—Ç:**
- ‚úÖ WFO Efficiency > 0.5 ‚Üí –†–æ–±–∞—Å—Ç–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è
- ‚ö†Ô∏è Consistency 75% ‚Üí –ë—É–¥—É—Ç –ø–µ—Ä–∏–æ–¥—ã –ø—Ä–æ—Å–∞–¥–∫–∏
- ‚úÖ Stability < 0.3 ‚Üí –°—Ç–∞–±–∏–ª—å–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
- ‚úÖ Degradation < 50% ‚Üí –ü—Ä–∏–µ–º–ª–µ–º–æ

**–ò—Ç–æ–≥:** **–°—Ç—Ä–∞—Ç–µ–≥–∏—è —Ä–æ–±–∞—Å—Ç–Ω–∞, –º–æ–∂–Ω–æ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –¥–ª—è live.**

---

<a name="–¥–∞–Ω–Ω—ã–µ"></a>
## 6. –ö–ê–ö–ò–ï –î–ê–ù–ù–´–ï –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –í–æ–ø—Ä–æ—Å: "–ö–∞–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –≤—Ö–æ–¥—è—Ç –≤ WFO?"

**–û—Ç–≤–µ—Ç:** –°–´–†–´–ï –¥–∞–Ω–Ω—ã–µ –ë–ï–ó –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–π –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏!

### ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û:

```
–®–∞–≥ 1: –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—à—å —Å—Ç—Ä–∞—Ç–µ–≥–∏—é –Ω–∞ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö
       ‚Üí –Ω–∞—Ö–æ–¥–∏—à—å "–ª—É—á—à–∏–µ" –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

–®–∞–≥ 2: –ó–∞–ø—É—Å–∫–∞–µ—à—å WFO —Å —ç—Ç–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
```

**–ü–æ—á–µ–º—É –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ:** –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –£–ñ–ï –ø–æ–¥–æ–≥–Ω–∞–Ω—ã –ø–æ–¥ –¥–∞–Ω–Ω—ã–µ! WFO –Ω–µ –ø–æ–∫–∞–∂–µ—Ç —Ä–µ–∞–ª—å–Ω—É—é –∫–∞—Ä—Ç–∏–Ω—É.

---

### ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û:

```
–®–∞–≥ 1: –ë–µ—Ä—ë—à—å –°–´–†–û–ô –¥–∞—Ç–∞—Å–µ—Ç (BTCUSDT 2020-2024)

–®–∞–≥ 2: –ó–∞–ø—É—Å–∫–∞–µ—à—å WFO
       ‚Üí WFO –°–ê–ú –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—Ç –Ω–∞ –∫–∞–∂–¥–æ–º Train –æ–∫–Ω–µ
       ‚Üí WFO –°–ê–ú —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç –Ω–∞ –∫–∞–∂–¥–æ–º Test –æ–∫–Ω–µ

–®–∞–≥ 3: –ü–æ–ª—É—á–∞–µ—à—å —Ä–æ–±–∞—Å—Ç–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
```

**–ü–æ—á–µ–º—É –ø—Ä–∞–≤–∏–ª—å–Ω–æ:** –ö–∞–∂–¥–æ–µ Train –æ–∫–Ω–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—Ç—Å—è –ù–ï–ó–ê–í–ò–°–ò–ú–û. Test –¥–∞–Ω–Ω—ã–µ –ù–ï –í–ò–î–Ø–¢ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é.

---

### –î–µ—Ç–∞–ª—å–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å

**Input –¥–ª—è WFO:**
```python
# –°–´–†–û–ô –¥–∞—Ç–∞—Å–µ—Ç
data = load_klines('data/BTCUSDT_1m.parquet')
# –≠—Ç–æ –ø—Ä–æ—Å—Ç–æ –º–∞—Å—Å–∏–≤ —Ü–µ–Ω/–æ–±—ä—ë–º–æ–≤, –ë–ï–ó –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

config = WFOConfig(
    strategy_name='ported_from_example',  # –ù–∞–∑–≤–∞–Ω–∏–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
    symbol='BTCUSDT',
    # –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –ù–ï —É–∫–∞–∑—ã–≤–∞–µ—à—å!
    # WFO —Å–∞–º –∏—Ö –Ω–∞–π–¥—ë—Ç
)

analyzer = WFOAnalyzer(config, data)
results = analyzer.run_wfo()
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç WFO –≤–Ω—É—Ç—Ä–∏:**
```python
# –î–ª—è –∫–∞–∂–¥–æ–≥–æ –æ–∫–Ω–∞:
for window in windows:
    train_data = data[window.train_start:window.train_end]
    test_data = data[window.test_start:window.test_end]

    # –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–Ø –Ω–∞ train
    optimizer = FastStrategyOptimizer(...)
    optimizer.optimize(train_data, n_trials=500)
    best_params = optimizer.best_params  # –ù–∞—Ö–æ–¥–∏—Ç –ù–û–í–´–ï –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

    # –¢–ï–°–¢ –Ω–∞ test
    strategy = Strategy(**best_params)
    results = strategy.backtest(test_data)  # Test –¥–∞–Ω–Ω—ã–µ –ù–ï –í–ò–î–ï–õ–ò –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é!
```

---

### –ö–∞–∫–æ–π –¥–∞—Ç–∞—Å–µ—Ç –≤—ã–±—Ä–∞—Ç—å

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**

1. **–†–∞–∑–º–µ—Ä:** –ú–∏–Ω–∏–º—É–º 1M –±–∞—Ä–æ–≤ (–ª—É—á—à–µ 2-5M)
   - –ß—Ç–æ–±—ã –±—ã–ª–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ä–∞–∑–±–∏–µ–Ω–∏—è –Ω–∞ –æ–∫–Ω–∞

2. **–ü–µ—Ä–∏–æ–¥:** 2-5 –ª–µ—Ç –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
   - –í–∫–ª—é—á–∞–µ—Ç —Ä–∞–∑–Ω—ã–µ —Ä—ã–Ω–æ—á–Ω—ã–µ —Ä–µ–∂–∏–º—ã (bull/bear/sideways)

3. **–ö–∞—á–µ—Å—Ç–≤–æ:** –ë–µ–∑ –ø—Ä–æ–ø—É—Å–∫–æ–≤, –±–µ–∑ outliers

4. **–§–æ—Ä–º–∞—Ç:** NumpyKlinesData (—Ç–≤–æ–π VectorizedKlinesHandler)

**–ü—Ä–∏–º–µ—Ä:**
```python
# –•–æ—Ä–æ—à–∏–π –¥–∞—Ç–∞—Å–µ—Ç –¥–ª—è WFO
data_path = 'data/BTCUSDT_1m_2020-2024.parquet'
# 2M –±–∞—Ä–æ–≤, 4 –≥–æ–¥–∞, —Ä–∞–∑–Ω—ã–µ —Ä–µ–∂–∏–º—ã —Ä—ã–Ω–∫–∞
```

---

<a name="–∫–æ–≥–¥–∞"></a>
## 7. –ö–û–ì–î–ê –∑–∞–ø—É—Å–∫–∞—Ç—å WFO

### Timeline —Ç–≤–æ–µ–π —Ä–∞–±–æ—Ç—ã —Å–æ —Å—Ç—Ä–∞—Ç–µ–≥–∏–µ–π

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –≠—Ç–∞–ø 1: –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏                           ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ ‚Ä¢ –ü—Ä–∏–¥—É–º—ã–≤–∞–µ—à—å –ª–æ–≥–∏–∫—É (entry/exit rules)               ‚îÇ
‚îÇ ‚Ä¢ –ü–∏—à–µ—à—å –∫–æ–¥ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏                                  ‚îÇ
‚îÇ ‚Ä¢ –û–ø—Ä–µ–¥–µ–ª—è–µ—à—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥–µ—à—å –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å  ‚îÇ
‚îÇ                                                         ‚îÇ
‚îÇ –ù–ï –ó–ê–ü–£–°–ö–ê–ï–®–¨ WFO                                      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –≠—Ç–∞–ø 2: –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏–¥–µ–∏                          ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ ‚Ä¢ –ó–∞–ø—É—Å–∫–∞–µ—à—å –ø—Ä–æ—Å—Ç—É—é –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é –Ω–∞ 1 –¥–∞—Ç–∞—Å–µ—Ç–µ         ‚îÇ
‚îÇ   (FastStrategyOptimizer, 100-200 trials)              ‚îÇ
‚îÇ ‚Ä¢ –°–º–æ—Ç—Ä–∏—à—å: –µ—Å—Ç—å –ª–∏ edge –≤–æ–æ–±—â–µ?                       ‚îÇ
‚îÇ ‚Ä¢ –ï—Å–ª–∏ Sharpe < 1.0 ‚Üí –∏–¥–µ—è –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –¥–∞–ª—å—à–µ –Ω–µ –∏–¥—ë–º ‚îÇ
‚îÇ                                                         ‚îÇ
‚îÇ –ù–ï –ó–ê–ü–£–°–ö–ê–ï–®–¨ WFO (–ø–æ–∫–∞ —Ä–∞–Ω–æ)                         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –≠—Ç–∞–ø 3: WFO VALIDATION ‚Üê –ó–î–ï–°–¨ –ó–ê–ü–£–°–ö–ê–ï–®–¨ WFO         ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ ‚Ä¢ –°—Ç—Ä–∞—Ç–µ–≥–∏—è –ø–æ–∫–∞–∑–∞–ª–∞ Sharpe > 1.5 –Ω–∞ –ø—Ä–æ—Å—Ç–æ–º backtest  ‚îÇ
‚îÇ ‚Ä¢ –¢–µ–ø–µ—Ä—å –ø—Ä–æ–≤–µ—Ä—è–µ–º –†–û–ë–ê–°–¢–ù–û–°–¢–¨ —á–µ—Ä–µ–∑ WFO               ‚îÇ
‚îÇ ‚Ä¢ WFO –ø–æ–∫–∞–∂–µ—Ç: —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–∏ –Ω–∞ OOS –¥–∞–Ω–Ω—ã—Ö               ‚îÇ
‚îÇ                                                         ‚îÇ
‚îÇ ‚úÖ –ó–ê–ü–£–°–ö–ê–ï–®–¨ WFO                                      ‚îÇ
‚îÇ                                                         ‚îÇ
‚îÇ –ï—Å–ª–∏ WFO Efficiency > 0.5:                             ‚îÇ
‚îÇ   ‚Üí –°—Ç—Ä–∞—Ç–µ–≥–∏—è —Ä–æ–±–∞—Å—Ç–Ω–∞ ‚Üí –∏–¥—ë–º –¥–∞–ª—å—à–µ                   ‚îÇ
‚îÇ –ï—Å–ª–∏ WFO Efficiency < 0.5:                             ‚îÇ
‚îÇ   ‚Üí Overfit ‚Üí —É–ø—Ä–æ—â–∞–µ–º —Å—Ç—Ä–∞—Ç–µ–≥–∏—é ‚Üí repeat —ç—Ç–∞–ø 3       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –≠—Ç–∞–ø 4: Multi-Dataset Validation                       ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ ‚Ä¢ WFO –ø—Ä–æ—à—ë–ª –Ω–∞ 1 –¥–∞—Ç–∞—Å–µ—Ç–µ (BTCUSDT)                   ‚îÇ
‚îÇ ‚Ä¢ –¢–µ–ø–µ—Ä—å –ø—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞ –¥—Ä—É–≥–∏—Ö —Å–∏–º–≤–æ–ª–∞—Ö (ETH, SOL, etc)  ‚îÇ
‚îÇ ‚Ä¢ –ó–∞–ø—É—Å–∫–∞–µ—à—å WFO –Ω–∞ —Ç–æ–ø-10 –¥–∞—Ç–∞—Å–µ—Ç–∞—Ö                   ‚îÇ
‚îÇ ‚Ä¢ –ü—Ä–æ–≤–µ—Ä—è–µ—à—å: —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–∏ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ                 ‚îÇ
‚îÇ                                                         ‚îÇ
‚îÇ ‚úÖ –ó–ê–ü–£–°–ö–ê–ï–®–¨ WFO –Ω–∞ –∫–∞–∂–¥–æ–º –¥–∞—Ç–∞—Å–µ—Ç–µ                   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –≠—Ç–∞–ø 5: Final Ensemble                                 ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ ‚Ä¢ –°–æ–±–∏—Ä–∞–µ—à—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–æ –≤—Å–µ—Ö WFO runs                 ‚îÇ
‚îÇ ‚Ä¢ –ë–µ—Ä—ë—à—å median/–∫–æ–Ω—Å–µ–Ω—Å—É—Å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã                    ‚îÇ
‚îÇ ‚Ä¢ –§–∏–Ω–∞–ª—å–Ω—ã–π hold-out test                              ‚îÇ
‚îÇ                                                         ‚îÇ
‚îÇ ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—à—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã WFO                          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –≠—Ç–∞–ø 6: Live Trading                                   ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ ‚Ä¢ –ó–∞–ø—É—Å–∫–∞–µ—à—å live —Å —Ñ–∏–Ω–∞–ª—å–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏             ‚îÇ
‚îÇ ‚Ä¢ –ú–æ–Ω–∏—Ç–æ—Ä–∏—à—å performance                               ‚îÇ
‚îÇ ‚Ä¢ –ï—Å–ª–∏ live Sharpe –±–ª–∏–∑–æ–∫ –∫ OOS Sharpe ‚Üí ‚úÖ            ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

### –ö–æ–≥–¥–∞ –ù–ï –Ω—É–∂–µ–Ω WFO

‚ùå **–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏** ‚Äî —Å–ª–∏—à–∫–æ–º —Ä–∞–Ω–æ, —Å–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—å –±–∞–∑–æ–≤—É—é –∏–¥–µ—é
‚ùå **Quick backtest** ‚Äî –¥–ª—è –±—ã—Å—Ç—Ä—ã—Ö —Ç–µ—Å—Ç–æ–≤ —Ö–≤–∞—Ç–∏—Ç –ø—Ä–æ—Å—Ç–æ–π –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
‚ùå **–û—á–µ–Ω—å –º–∞–ª–æ –¥–∞–Ω–Ω—ã—Ö** ‚Äî < 500K –±–∞—Ä–æ–≤, –Ω–µ —Ö–≤–∞—Ç–∏—Ç –¥–ª—è —Ä–∞–∑–±–∏–µ–Ω–∏—è –Ω–∞ –æ–∫–Ω–∞
‚ùå **Live monitoring** ‚Äî WFO –¥–ª—è pre-live –ø—Ä–æ–≤–µ—Ä–∫–∏, –Ω–µ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

### –ö–æ–≥–¥–∞ –ù–£–ñ–ï–ù WFO

‚úÖ **–ü–µ—Ä–µ–¥ live** ‚Äî –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–æ–±–∞—Å—Ç–Ω–æ—Å—Ç—å
‚úÖ **–ü–æ—Å–ª–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏** ‚Äî –∫–æ–≥–¥–∞ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –ø–æ–∫–∞–∑–∞–ª–∞ —Ö–æ—Ä–æ—à–∏–µ –ø—Ä–æ—Å—Ç—ã–µ backtest
‚úÖ **Multi-dataset validation** ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ—Å—Ç–∏
‚úÖ **Periodic re-validation** ‚Äî —Ä–∞–∑ –≤ –∫–≤–∞—Ä—Ç–∞–ª/–≥–æ–¥ –ø–æ–≤—Ç–æ—Ä—è—Ç—å WFO

---

<a name="–∑–∞–ø—É—Å–∫"></a>
## 8. –ö–ê–ö –ó–ê–ü–£–°–¢–ò–¢–¨ –ø–æ—à–∞–≥–æ–≤–æ

### –í–∞—Ä–∏–∞–Ω—Ç A: –ë–∞–∑–æ–≤—ã–π WFO –Ω–∞ –æ–¥–Ω–æ–º –¥–∞—Ç–∞—Å–µ—Ç–µ

**–®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤—å –¥–∞–Ω–Ω—ã–µ**

```python
# –£–±–µ–¥–∏—Å—å —á—Ç–æ –¥–∞—Ç–∞—Å–µ—Ç —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
import os
data_path = 'data/BTCUSDT_1m.parquet'

if not os.path.exists(data_path):
    print("‚ùå –î–∞—Ç–∞—Å–µ—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω!")
    print("–ü–æ–ª–æ–∂–∏ —Ñ–∞–π–ª –≤", data_path)
    exit()

print("‚úÖ –î–∞—Ç–∞—Å–µ—Ç –Ω–∞–π–¥–µ–Ω")
```

---

**–®–∞–≥ 2: –ò–º–ø–æ—Ä—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫**

```python
from src.optimization.wfo_analyzer import WFOAnalyzer, WFOConfig
```

---

**–®–∞–≥ 3: –°–æ–∑–¥–∞–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é**

```python
config = WFOConfig(
    # –û—Å–Ω–æ–≤–Ω–æ–µ
    strategy_name='ported_from_example',  # –¢–≤–æ—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è
    symbol='BTCUSDT',                     # –°–∏–º–≤–æ–ª

    # –¢–∏–ø WFO
    wfo_type='anchored',  # 'anchored' –∏–ª–∏ 'rolling'

    # –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –æ–∫–æ–Ω (–¥–ª—è anchored)
    min_train_size=0.4,   # –ú–∏–Ω–∏–º—É–º 40% –¥–∞–Ω–Ω—ã—Ö –Ω–∞ train
    test_size=0.1,        # –¢–µ—Å—Ç = 10% –¥–∞–Ω–Ω—ã—Ö
    step_size=0.1,        # –®–∞–≥ 10%
    gap_size=0.0,         # –ë–µ–∑ embargo (–º–æ–∂–µ—à—å –¥–æ–±–∞–≤–∏—Ç—å 0.05 = 5%)

    # Hold-out
    holdout_size=0.1,     # –ü–æ—Å–ª–µ–¥–Ω–∏–µ 10% –Ω–µ —Ç—Ä–æ–≥–∞–µ–º –¥–æ –∫–æ–Ω—Ü–∞

    # –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
    n_trials=500,         # Trials –Ω–∞ –∫–∞–∂–¥–æ–µ –æ–∫–Ω–æ
    objective_metric='sharpe_ratio',
    min_trades=10,
    max_drawdown_threshold=50.0,
    n_jobs=-1             # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤—Å–µ CPU
)
```

**–ü–æ—è—Å–Ω–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤:**

- `wfo_type='anchored'` ‚Äî train —Ä–∞—Å—Ç—ë—Ç, test —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω
- `min_train_size=0.4` ‚Äî –ø–µ—Ä–≤–æ–µ –æ–∫–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç 40% –¥–∞–Ω–Ω—ã—Ö –Ω–∞ train
- `test_size=0.1` ‚Äî –∫–∞–∂–¥–æ–µ test –æ–∫–Ω–æ = 10%
- `step_size=0.1` ‚Äî —Å–ª–µ–¥—É—é—â–µ–µ –æ–∫–Ω–æ —Å–¥–≤–∏–≥–∞–µ—Ç—Å—è –Ω–∞ 10%
- `holdout_size=0.1` ‚Äî –ø–æ—Å–ª–µ–¥–Ω–∏–µ 10% —Ä–µ–∑–µ—Ä–≤–∏—Ä—É–µ–º –¥–ª—è —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞

**–°–∫–æ–ª—å–∫–æ –æ–∫–æ–Ω —Å–æ–∑–¥–∞—Å—Ç—Å—è:**
```
–î–∞–Ω–Ω—ã–µ –¥–ª—è WFO = 100% - holdout = 90%

–û–∫–Ω–æ 1: Train 40%, Test 10% (–ø–æ–∫—Ä—ã–≤–∞–µ—Ç 0-50%)
–û–∫–Ω–æ 2: Train 50%, Test 10% (–ø–æ–∫—Ä—ã–≤–∞–µ—Ç 0-60%)
–û–∫–Ω–æ 3: Train 60%, Test 10% (–ø–æ–∫—Ä—ã–≤–∞–µ—Ç 0-70%)
–û–∫–Ω–æ 4: Train 70%, Test 10% (–ø–æ–∫—Ä—ã–≤–∞–µ—Ç 0-80%)
–û–∫–Ω–æ 5: Train 80%, Test 10% (–ø–æ–∫—Ä—ã–≤–∞–µ—Ç 0-90%)

–ò—Ç–æ–≥–æ: 5 –æ–∫–æ–Ω
```

---

**–®–∞–≥ 4: –°–æ–∑–¥–∞–π analyzer**

```python
analyzer = WFOAnalyzer(
    config=config,
    data_path=data_path,
    enable_debug=False  # True –µ—Å–ª–∏ —Ö–æ—á–µ—à—å –≤–∏–¥–µ—Ç—å –¥–µ—Ç–∞–ª–∏
)
```

---

**–®–∞–≥ 5: –ó–∞–ø—É—Å—Ç–∏ WFO**

```python
print("–ó–∞–ø—É—Å–∫–∞–µ–º WFO...")
print("–≠—Ç–æ –∑–∞–π–º—ë—Ç 10-30 –º–∏–Ω—É—Ç –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –¥–∞–Ω–Ω—ã—Ö")
print("-" * 60)

results = analyzer.run_wfo()
```

**–ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç:**
```
[WFO] Loaded 1,000,000 bars from data/BTCUSDT_1m.parquet
[WFO] Strategy: ported_from_example, Symbol: BTCUSDT
[WFO] Type: ANCHORED
[WFO] Reserved hold-out: 100,000 bars (10%)
[WFO] Created 5 windows

--------------------------------------------------------------------------------
Window 1
--------------------------------------------------------------------------------
Train: [0:400000] = 400,000 bars
Test:  [400000:500000] = 100,000 bars

[Train] Optimizing 500 trials...
[Train] Best Sharpe: 2.456
[Train] Best PnL: 245.30
[Train] Trades: 45

[Test]  OOS Sharpe: 1.834
[Test]  OOS PnL: 125.30
[Test]  OOS Trades: 38
[Test]  Window Efficiency: 74.67%

... (–æ–∫–Ω–∞ 2-5)

================================================================================
WFO ANALYSIS SUMMARY
================================================================================

Window Results:
--------------------------------------------------------------------------------
Window   IS Sharpe    OOS Sharpe   OOS PnL      Efficiency
--------------------------------------------------------------------------------
1        2.456        1.834        125.30       74.67%
2        2.687        1.592        98.45        59.25%
3        2.823        2.103        156.78       74.50%
4        2.601        1.456        89.23        55.98%
5        2.745        1.689        110.45       61.53%
--------------------------------------------------------------------------------

Robustness Metrics:
----------------------------------------
WFO Efficiency:    0.658
Consistency Score: 100.00%
Stability (CV):    0.152
Degradation:       34.20%
----------------------------------------

Interpretation:
‚úÖ WFO Efficiency > 0.5 ‚Üí Strategy is ROBUST
‚úÖ Consistency > 80% ‚Üí Works on most periods

Final Ensemble Parameters:
--------------------------------------------------------------------------------
  stop_loss_pct: 2.550
  take_profit_pct: 4.950
  entry_logic_mode: –¢–æ–ª—å–∫–æ –ø–æ –ø—Ä–∏–Ω—Ç–∞–º
  prints_analysis_period: 3
  prints_threshold_ratio: 2.450
  ...

================================================================================
HOLD-OUT TEST (Final Validation on Unseen Data)
================================================================================
Hold-out size: 100,000 bars

[Hold-out] Sharpe: 1.523
[Hold-out] PnL: 95.45
[Hold-out] Trades: 28
[Hold-out] Win Rate: 64.29%
Hold-out vs IS: 58.53%
‚úÖ Hold-out performance > 50% of IS ‚Üí GOOD
```

---

**–®–∞–≥ 6: –°–æ—Ö—Ä–∞–Ω–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã**

```python
analyzer.save_results(results)
# –°–æ—Ö—Ä–∞–Ω–∏—Ç –≤ wfo_results/wfo_ported_from_example_BTCUSDT_20251011_143022.json
```

---

**–®–∞–≥ 7: –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è**

```python
print("\n" + "="*60)
print("–¢–í–û–ô –í–ï–†–î–ò–ö–¢:")
print("="*60)

if results.wfo_efficiency > 0.5:
    print("‚úÖ –°—Ç—Ä–∞—Ç–µ–≥–∏—è –†–û–ë–ê–°–¢–ù–ê")
    print(f"   WFO Efficiency: {results.wfo_efficiency:.2%}")
    print(f"   –û–∂–∏–¥–∞–µ–º—ã–π live Sharpe: ~{results.holdout_sharpe:.2f}")
    print("\nüìä –§–∏–Ω–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:")
    for key, value in results.final_params.items():
        if isinstance(value, float):
            print(f"   {key}: {value:.3f}")
        else:
            print(f"   {key}: {value}")
    print("\n‚úÖ –ú–æ–∂–Ω–æ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –¥–ª—è live trading")
else:
    print("‚ùå –°—Ç—Ä–∞—Ç–µ–≥–∏—è –ù–ï –†–û–ë–ê–°–¢–ù–ê")
    print(f"   WFO Efficiency: {results.wfo_efficiency:.2%} (< 0.5)")
    print("\n‚ö†Ô∏è  –ß—Ç–æ –¥–µ–ª–∞—Ç—å:")
    print("   1. –£–ø—Ä–æ—Å—Ç–∏—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥–∏—é (–º–µ–Ω—å—à–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤)")
    print("   2. –ò–∑–º–µ–Ω–∏—Ç—å –ª–æ–≥–∏–∫—É entry/exit")
    print("   3. –î–æ–±–∞–≤–∏—Ç—å constraints (min_trades, max_DD)")
    print("   4. –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –¥—Ä—É–≥—É—é objective –º–µ—Ç—Ä–∏–∫—É")
```

---

### –í–∞—Ä–∏–∞–Ω—Ç B: WFO –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –¥–∞—Ç–∞—Å–µ—Ç–∞—Ö

```python
# –°–ø–∏—Å–æ–∫ —Ç–≤–æ–∏—Ö –¥–∞—Ç–∞—Å–µ—Ç–æ–≤
datasets = [
    'data/BTCUSDT_1m.parquet',
    'data/ETHUSDT_1m.parquet',
    'data/SOLUSDT_1m.parquet',
    # ... –µ—â—ë 60
]

all_results = []

for data_path in datasets:
    symbol = data_path.split('/')[-1].replace('_1m.parquet', '')

    print(f"\n{'='*60}")
    print(f"WFO –¥–ª—è {symbol}")
    print(f"{'='*60}")

    config = WFOConfig(
        strategy_name='ported_from_example',
        symbol=symbol,
        wfo_type='anchored',
        min_train_size=0.4,
        test_size=0.1,
        step_size=0.1,
        holdout_size=0.1,
        n_trials=300,  # –ú–µ–Ω—å—à–µ trials –¥–ª—è —Å–∫–æ—Ä–æ—Å—Ç–∏
        n_jobs=-1
    )

    analyzer = WFOAnalyzer(config, data_path)
    results = analyzer.run_wfo()
    analyzer.save_results(results)

    all_results.append({
        'symbol': symbol,
        'wfo_efficiency': results.wfo_efficiency,
        'consistency': results.consistency_score,
        'holdout_sharpe': results.holdout_sharpe,
        'final_params': results.final_params
    })

# –ê–≥—Ä–µ–≥–∞—Ü–∏—è –ø–æ –≤—Å–µ–º –¥–∞—Ç–∞—Å–µ—Ç–∞–º
import numpy as np

avg_efficiency = np.mean([r['wfo_efficiency'] for r in all_results])
avg_consistency = np.mean([r['consistency'] for r in all_results])

print(f"\n{'='*60}")
print(f"SUMMARY: ALL DATASETS")
print(f"{'='*60}")
print(f"Average WFO Efficiency: {avg_efficiency:.2%}")
print(f"Average Consistency: {avg_consistency:.2%}")
print(f"Datasets with Efficiency > 0.5: {sum(1 for r in all_results if r['wfo_efficiency'] > 0.5)} / {len(all_results)}")
```

---

<a name="—Ä–µ–∑—É–ª—å—Ç–∞—Ç"></a>
## 9. –ß–¢–û –ü–û–õ–£–ß–ò–®–¨ –Ω–∞ –≤—ã—Ö–æ–¥–µ

### Output #1: –ö–æ–Ω—Å–æ–ª—å–Ω—ã–π –æ—Ç—á—ë—Ç

–°–º. –≤—ã—à–µ (–®–∞–≥ 5) ‚Äî –¥–µ—Ç–∞–ª—å–Ω—ã–π –≤—ã–≤–æ–¥ –≤ –∫–æ–Ω—Å–æ–ª—å —Å —Ç–∞–±–ª–∏—Ü–∞–º–∏.

---

### Output #2: JSON —Ñ–∞–π–ª —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏

**–ü—É—Ç—å:** `wfo_results/wfo_ported_from_example_BTCUSDT_20251011_143022.json`

**–°–æ–¥–µ—Ä–∂–∏–º–æ–µ:**
```json
{
  "config": {
    "strategy_name": "ported_from_example",
    "symbol": "BTCUSDT",
    "wfo_type": "anchored",
    "n_trials": 500,
    "objective_metric": "sharpe_ratio"
  },
  "windows": [
    {
      "window_id": 1,
      "train_bars": 400000,
      "test_bars": 100000,
      "is_sharpe": 2.456,
      "oos_sharpe": 1.834,
      "oos_pnl": 125.30,
      "oos_trades": 38,
      "oos_max_dd": 12.5,
      "params": {
        "stop_loss_pct": 2.5,
        "take_profit_pct": 5.0,
        "entry_logic_mode": "–¢–æ–ª—å–∫–æ –ø–æ –ø—Ä–∏–Ω—Ç–∞–º",
        "prints_analysis_period": 3,
        "prints_threshold_ratio": 2.5
      }
    },
    {
      "window_id": 2,
      ...
    }
  ],
  "metrics": {
    "wfo_efficiency": 0.658,
    "consistency": 1.0,
    "stability": 0.152,
    "degradation": 0.342
  },
  "final_params": {
    "stop_loss_pct": 2.55,
    "take_profit_pct": 4.95,
    "entry_logic_mode": "–¢–æ–ª—å–∫–æ –ø–æ –ø—Ä–∏–Ω—Ç–∞–º",
    "prints_analysis_period": 3,
    "prints_threshold_ratio": 2.45
  },
  "holdout": {
    "sharpe": 1.523,
    "pnl": 95.45,
    "trades": 28
  },
  "completed_at": "2025-10-11T14:30:22.123456"
}
```

**–ß—Ç–æ —Å —ç—Ç–∏–º –¥–µ–ª–∞—Ç—å:**
- –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –∞—Ä—Ö–∏–≤
- –°—Ä–∞–≤–Ω–∏–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ runs
- –ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
- Tracking –º–µ—Ç—Ä–∏–∫ –≤–æ –≤—Ä–µ–º–µ–Ω–∏

---

### Output #3: –§–∏–Ω–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è live

**–°–∞–º–æ–µ –≤–∞–∂–Ω–æ–µ:** `results.final_params`

```python
final_params = {
    'stop_loss_pct': 2.55,
    'take_profit_pct': 4.95,
    'entry_logic_mode': '–¢–æ–ª—å–∫–æ –ø–æ –ø—Ä–∏–Ω—Ç–∞–º',
    'prints_analysis_period': 3,
    'prints_threshold_ratio': 2.45,
    'hldir_window': 5,
    'hldir_offset': 1
}
```

**–≠—Ç–æ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ—Ç–æ—Ä—ã–µ:**
- –†–∞–±–æ—Ç–∞—é—Ç –Ω–∞ OOS –¥–∞–Ω–Ω—ã—Ö
- –ü—Ä–æ—à–ª–∏ WFO validation
- Median –∏–∑ –≤—Å–µ—Ö –æ–∫–æ–Ω
- –ì–æ—Ç–æ–≤—ã –¥–ª—è live trading

**–ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
```python
from src.strategies.base_strategy import StrategyRegistry

strategy_class = StrategyRegistry.get_strategy('ported_from_example')
strategy = strategy_class(symbol='BTCUSDT', **final_params)

# –¢–µ–ø–µ—Ä—å –º–æ–∂–µ—à—å –∑–∞–ø—É—Å–∫–∞—Ç—å live
```

---

<a name="–ø—Ä–∏–º–µ—Ä—ã"></a>
## 10. –ü–†–ò–ú–ï–†–´ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –ó–∞–ø—É—Å–∫ –±–∞–∑–æ–≤–æ–≥–æ WFO

```bash
cd "C:\visual projects\backtrader"
python examples/wfo_example.py --example 1
```

**–ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç:**
- –ó–∞–≥—Ä—É–∑–∏—Ç `data/BTCUSDT_1m.parquet`
- –ó–∞–ø—É—Å—Ç–∏—Ç Anchored WFO (5 –æ–∫–æ–Ω)
- –í—ã–≤–µ–¥–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
- –°–æ—Ö—Ä–∞–Ω–∏—Ç JSON

**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** ~15-30 –º–∏–Ω—É—Ç

---

### –ü—Ä–∏–º–µ—Ä 2: Rolling WFO

```bash
python examples/wfo_example.py --example 2
```

**–ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç:**
- –ó–∞–≥—Ä—É–∑–∏—Ç `data/ETHUSDT_1m.parquet`
- –ó–∞–ø—É—Å—Ç–∏—Ç Rolling WFO
- –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å Anchored

---

### –ü—Ä–∏–º–µ—Ä 3: Date-based validation

**–ï—Å–ª–∏ —É —Ç–µ–±—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```
data/
  05.10.2025/
    BTCUSDT.parquet
  06.10.2025/
    BTCUSDT.parquet
  07.10.2025/
    BTCUSDT.parquet
```

```bash
python examples/wfo_example.py --example 3
```

**–ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç:**
- –°–∫–∞–Ω–∏—Ä—É–µ—Ç –ø–∞–ø–∫–∏ –ø–æ –¥–∞—Ç–∞–º
- Train –Ω–∞ –¥–∞–Ω–Ω—ã—Ö –¥–æ 05.10
- Test –Ω–∞ 06-07.10
- Temporal validation

---

### –ü—Ä–∏–º–µ—Ä 4: –°—Ä–∞–≤–Ω–µ–Ω–∏–µ Anchored vs Rolling

```bash
python examples/wfo_example.py --example 4
```

**–ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç:**
- –ó–∞–ø—É—Å—Ç–∏—Ç –æ–±–∞ —Ç–∏–ø–∞ WFO –Ω–∞ –æ–¥–Ω–æ–º –¥–∞—Ç–∞—Å–µ—Ç–µ
- –°—Ä–∞–≤–Ω–∏—Ç –º–µ—Ç—Ä–∏–∫–∏
- –ü–æ–¥—Å–∫–∞–∂–µ—Ç –∫–∞–∫–æ–π –ª—É—á—à–µ –¥–ª—è —Ç–≤–æ–µ–π —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏

---

<a name="faq"></a>
## 11. FAQ - –ß–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã

### Q1: –°–∫–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏ –∑–∞–Ω–∏–º–∞–µ—Ç WFO?

**A:** –ó–∞–≤–∏—Å–∏—Ç –æ—Ç:
- –†–∞–∑–º–µ—Ä–∞ –¥–∞—Ç–∞—Å–µ—Ç–∞ (1M –±–∞—Ä–æ–≤ ‚âà 20-30 –º–∏–Ω)
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–∞ trials (500 trials √ó 5 –æ–∫–æ–Ω = 2500 trials total)
- CPU (n_jobs=-1 –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≤—Å–µ —è–¥—Ä–∞)

**–ü—Ä–∏–º–µ—Ä–Ω–æ–µ –≤—Ä–µ–º—è:**
- 1M –±–∞—Ä–æ–≤, 500 trials, 5 –æ–∫–æ–Ω, 8 CPU: **20-30 –º–∏–Ω—É—Ç**
- 2M –±–∞—Ä–æ–≤, 300 trials, 4 –æ–∫–Ω–∞, 16 CPU: **15-20 –º–∏–Ω—É—Ç**

**–° precomputed –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞–º–∏ (—Ç–≤–æ–π fast_optimizer) ‚Äî –≤ 2-3x –±—ã—Å—Ç—Ä–µ–µ —á–µ–º —Å—Ç–∞—Ä—ã–π WFO!**

---

### Q2: –°–∫–æ–ª—å–∫–æ –æ–∫–æ–Ω –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å?

**A:** –û–ø—Ç–∏–º–∞–ª—å–Ω–æ **4-6 –æ–∫–æ–Ω**.

**–ü–æ—á–µ–º—É:**
- < 3 –æ–∫–Ω–∞ ‚Üí –º–∞–ª–æ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- > 8 –æ–∫–æ–Ω ‚Üí —Å–ª–∏—à–∫–æ–º –¥–æ–ª–≥–æ, –Ω–µ—Ç —Å–º—ã—Å–ª–∞

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- Anchored: `step_size=0.1` ‚Üí —Å–æ–∑–¥–∞—Å—Ç 5-6 –æ–∫–æ–Ω
- Rolling: `step_size = test_size` ‚Üí –Ω–µ –ø–µ—Ä–µ–∫—Ä—ã–≤–∞—é—Ç—Å—è, 4-5 –æ–∫–æ–Ω

---

### Q3: –ö–∞–∫–æ–π —Ä–∞–∑–º–µ—Ä test –æ–∫–Ω–∞ –≤—ã–±—Ä–∞—Ç—å?

**A:** **10-15% –æ—Ç –¥–∞–Ω–Ω—ã—Ö**.

**–ü—Ä–∏–º–µ—Ä—ã:**
- 1M –±–∞—Ä–æ–≤ ‚Üí test = 100K-150K –±–∞—Ä–æ–≤
- 500K –±–∞—Ä–æ–≤ ‚Üí test = 50K-75K –±–∞—Ä–æ–≤

**–ü–æ—á–µ–º—É:**
- < 10% ‚Üí –º–∞–ª–æ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- > 20% ‚Üí –º–∞–ª–æ –æ–∫–æ–Ω –ø–æ–ª—É—á–∏—Ç—Å—è

---

### Q4: –ù—É–∂–µ–Ω –ª–∏ Gap (embargo)?

**A:** –ó–∞–≤–∏—Å–∏—Ç –æ—Ç –¥–∞–Ω–Ω—ã—Ö –∏ —Ç–∞–π–º—Ñ—Ä–µ–π–º–∞.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- **1m/5m –¥–∞–Ω–Ω—ã–µ:** gap = 0.01-0.03 (1-3% = 1-3 –¥–Ω—è)
- **1h/4h –¥–∞–Ω–Ω—ã–µ:** gap = 0.05 (5% = –Ω–µ–¥–µ–ª—è)
- **Daily –¥–∞–Ω–Ω—ã–µ:** gap = 0.1 (10% = –º–µ—Å—è—Ü)

**–ö–æ–≥–¥–∞ –Ω–µ –Ω—É–∂–µ–Ω:**
- –ï—Å–ª–∏ –Ω–µ—Ç –ª–∞–≥–æ–≤ –≤ –¥–∞–Ω–Ω—ã—Ö
- –ï—Å–ª–∏ entry/exit —Ç–æ—á–∫–∏ –Ω–µ –∑–∞–≤–∏—Å—è—Ç –æ—Ç –±—É–¥—É—â–µ–≥–æ

---

### Q5: –ß—Ç–æ –¥–µ–ª–∞—Ç—å –µ—Å–ª–∏ WFO Efficiency < 0.5?

**A:** –°—Ç—Ä–∞—Ç–µ–≥–∏—è –ø–µ—Ä–µ–ø–æ–¥–æ–≥–Ω–∞–Ω–∞. –î–µ–π—Å—Ç–≤–∏—è:

1. **–£–ø—Ä–æ—Å—Ç–∏—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥–∏—é:**
   - –£–º–µ–Ω—å—à–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
   - –§–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

2. **–ò–∑–º–µ–Ω–∏—Ç—å objective:**
   - –í–º–µ—Å—Ç–æ `sharpe_ratio` –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–º–ø–æ–∑–∏—Ç–Ω—É—é –º–µ—Ç—Ä–∏–∫—É
   - –î–æ–±–∞–≤–∏—Ç—å penalty –∑–∞ drawdown

3. **–î–æ–±–∞–≤–∏—Ç—å constraints:**
   ```python
   min_trades=20,  # –ë–æ–ª—å—à–µ —Å–¥–µ–ª–æ–∫
   max_drawdown_threshold=30.0  # –°—Ç—Ä–æ–∂–µ –ø–æ DD
   ```

4. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏–∫—É:**
   - –ú–æ–∂–µ—Ç –±—ã—Ç—å edge —Å–ª–∞–±—ã–π
   - –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –¥—Ä—É–≥—É—é —Å—Ç—Ä–∞—Ç–µ–≥–∏—é

---

### Q6: –ú–æ–∂–Ω–æ –ª–∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å WFO –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –¥–∞—Ç–∞—Å–µ—Ç–∞—Ö –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ?

**A:** –î–∞, –∏—Å–ø–æ–ª—å–∑—É–π multiprocessing:

```python
from multiprocessing import Pool

def run_wfo_for_dataset(data_path):
    config = WFOConfig(...)
    analyzer = WFOAnalyzer(config, data_path)
    return analyzer.run_wfo()

datasets = ['data/BTC.parquet', 'data/ETH.parquet', ...]

with Pool(processes=4) as pool:
    all_results = pool.map(run_wfo_for_dataset, datasets)
```

---

### Q7: –ß—Ç–æ –¥–µ–ª–∞—Ç—å —Å final_params –ø–æ—Å–ª–µ WFO?

**A:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è live trading!

```python
# 1. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
import json
with open('final_params.json', 'w') as f:
    json.dump(results.final_params, f)

# 2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ live
from src.strategies.base_strategy import StrategyRegistry

strategy_class = StrategyRegistry.get_strategy('ported_from_example')
live_strategy = strategy_class(symbol='BTCUSDT', **results.final_params)

# 3. –ó–∞–ø—É—Å–∫–∞—Ç—å trade signals
# (—Ç–≤–æ—è live trading –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞)
```

---

### Q8: –ö–∞–∫ —á–∞—Å—Ç–æ –ø–µ—Ä–µ–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å?

**A:** **–†–∞–∑ –≤ –∫–≤–∞—Ä—Ç–∞–ª –∏–ª–∏ –ø–æ–ª–≥–æ–¥–∞**.

**Why:**
- –†—ã–Ω–æ–∫ –º–µ–Ω—è–µ—Ç—Å—è ‚Üí –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ç–µ—Ä—è—é—Ç –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å
- –ù–æ —Å–ª–∏—à–∫–æ–º —á–∞—Å—Ç–∞—è –ø–µ—Ä–µ–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è ‚Üí overfitting

**–ü—Ä–æ—Ü–µ—Å—Å:**
- –ö–∞–∂–¥—ã–µ 3-6 –º–µ—Å—è—Ü–µ–≤: –∑–∞–ø—É—Å–∫–∞—Ç—å WFO –Ω–∞ —Å–≤–µ–∂–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- –°—Ä–∞–≤–Ω–∏–≤–∞—Ç—å –Ω–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–æ —Å—Ç–∞—Ä—ã–º–∏
- –ï—Å–ª–∏ WFO Efficiency –≤—Å—ë –µ—â—ë > 0.5 ‚Üí –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å —Å–æ —Å—Ç–∞—Ä—ã–º–∏
- –ï—Å–ª–∏ —É–ø–∞–ª–∞ < 0.4 ‚Üí –æ–±–Ω–æ–≤–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

---

### Q9: –í —á—ë–º —Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É wfo_example.py –∏ wfo_analyzer.py?

**A:**

- **wfo_analyzer.py** = –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ (–∫–ª–∞—Å—Å WFOAnalyzer)
  - –¢—ã –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—à—å –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—à—å –≤ —Å–≤–æ—ë–º –∫–æ–¥–µ

- **wfo_example.py** = –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
  - –ì–æ—Ç–æ–≤—ã–µ —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è –∑–∞–ø—É—Å–∫–∞
  - –û–±—É—á–∞—é—â–∏–µ –ø—Ä–∏–º–µ—Ä—ã
  - –ú–æ–∂–µ—à—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥ –≤ —Å–≤–æ–π –ø—Ä–æ–µ–∫—Ç

**–ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
```python
# –í–∞—Ä–∏–∞–Ω—Ç 1: –ó–∞–ø—É—Å—Ç–∏—Ç—å –≥–æ—Ç–æ–≤—ã–π –ø—Ä–∏–º–µ—Ä
python examples/wfo_example.py --example 1

# –í–∞—Ä–∏–∞–Ω—Ç 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ —Å–≤–æ—ë–º –∫–æ–¥–µ
from src.optimization.wfo_analyzer import WFOAnalyzer, WFOConfig
# ... —Ç–≤–æ–π –∫–æ–¥
```

---

### Q10: –ß—Ç–æ –ª—É—á—à–µ: Anchored –∏–ª–∏ Rolling?

**A:** –ó–∞–≤–∏—Å–∏—Ç –æ—Ç —Ä—ã–Ω–∫–∞ –∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏.

**Anchored –ª—É—á—à–µ –∫–æ–≥–¥–∞:**
- –•–æ—á–µ—à—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–µ—Å—å –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–π –æ–ø—ã—Ç
- –†—ã–Ω–æ–∫ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —Å—Ç–∞–±–∏–ª–µ–Ω
- –ú–Ω–æ–≥–æ –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤

**Rolling –ª—É—á—à–µ –∫–æ–≥–¥–∞:**
- –†—ã–Ω–æ–∫ –±—ã—Å—Ç—Ä–æ –º–µ–Ω—è–µ—Ç—Å—è (crypto)
- –°—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ —Ç–µ—Ä—è—é—Ç —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å
- –ù—É–∂–Ω–∞ –±—ã—Å—Ç—Ä–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è

**–°–æ–≤–µ—Ç:** –ó–∞–ø—É—Å—Ç–∏ –æ–±–∞ (–ø—Ä–∏–º–µ—Ä 4) –∏ —Å—Ä–∞–≤–Ω–∏ WFO Efficiency!

---

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

### –ß–µ–∫–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ live trading

- [ ] –ó–∞–ø—É—Å—Ç–∏–ª WFO –Ω–∞ –æ—Å–Ω–æ–≤–Ω–æ–º –¥–∞—Ç–∞—Å–µ—Ç–µ
- [ ] WFO Efficiency > 0.5
- [ ] Consistency > 70%
- [ ] Hold-out test –ø—Ä–æ—à—ë–ª —É—Å–ø–µ—à–Ω–æ
- [ ] –ó–∞–ø—É—Å—Ç–∏–ª WFO –Ω–∞ —Ç–æ–ø-10 –¥–∞—Ç–∞—Å–µ—Ç–∞—Ö
- [ ] –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–∞ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ —Å–∏–º–≤–æ–ª–æ–≤
- [ ] –°–æ—Ö—Ä–∞–Ω–∏–ª final_params
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–ª –Ω–∞ paper trading
- [ ] –ù–∞—Å—Ç—Ä–æ–∏–ª –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ live performance

### –ï—Å–ª–∏ –≤—Å—ë ‚úÖ ‚Üí –º–æ–∂–Ω–æ –≤ live!

**–û–∂–∏–¥–∞–Ω–∏—è:**
- Live Sharpe ‚âà Hold-out Sharpe (¬±20%)
- –ë—É–¥—É—Ç –ø–µ—Ä–∏–æ–¥—ã –ø—Ä–æ—Å–∞–¥–∫–∏ (Consistency < 100%)
- Degradation 30-50% –æ—Ç backtest ‚Äî —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ

**–£—Å–ø–µ—Ö–æ–≤ –≤ —Ç—Ä–µ–π–¥–∏–Ω–≥–µ! üöÄ**
