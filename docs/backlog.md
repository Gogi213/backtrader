# Backlog

## 2025-10-09 - Рефакторинг стратегии в соответствии с `signals.txt`

### Тип: Рефакторинг

### Описание
Полностью переработана `PortedFromExampleStrategy` для приведения в соответствие с официальной документацией `signals.txt`.

### Ключевые изменения:
- **`signal_generators.py`**:
    - Логика генерации сигналов теперь строго соответствует "Этапу 1".
    - Исправлен расчет процентилей (`vol_pctl`, `rng_pctl`).
    - Удалена посторонняя логика фильтрации (`enable_additional_filters`), которая относилась к этапу подтверждения.
- **`ported_from_example_strategy.py`**:
    - Устранен дублирующийся код (удалена старая версия `_build_trades_numba`).
    - Торговый цикл `_build_trades_numba` полностью переписан для соответствия "Этапам 2 и 3".
    - Реализован параметр `entry_logic_mode` для гибкого выбора логики определения направления.
    - Реализованы параметры `hldir_offset` и `aggressive_mode`.
    - Логика входа, выхода, SL/TP приведена к стандартному виду, описанному в `signals.txt`.
    - Обновлены параметры по умолчанию и пространство поиска гиперпараметров.

### Обоснование
Предыдущая реализация содержала дублирование, ошибки в расчетах и значительные отклонения от документированной логики. Рефакторинг устранил эти проблемы, сделав код чистым, предсказуемым и полностью управляемым через параметры, что критически важно для дальнейшей оптимизации и тестирования.